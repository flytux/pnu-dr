<div id="popups">
	<section class="sec-1">
		<div class="sec-body">			
			<div class="b-table-box flex-col-1" role="table" aria-label="1단 테이블">
				<div class="b-row-box" role="row">
					<div class="b-row-item">
						<div class="b-title-box" role="rowheader">
						   <label class="req tel-label">이메일</label>
						</div>
						<div class="b-con-box" role="cell">
							<div class="row">
								<div class="col-xl-3">
									<input type="text" id="MAIL_NAME" class="form-control" title="이메일아이디입력"/>
								</div>
								<div>
									<div class="col-1 text-center py-1">@</div>
								</div>
								<div class="col-xl-4">
									<input type="text" id="DOMAIN" class="form-control" title="이메일도메인입력"/>
								</div>
								<div class="col-xl-4">
									<select id="EMAIL_GCD" class="form-control" title="이메일도메인선택"></select>
								</div>
							</div>
						</div>
					</div>                                  
				</div>                                 
			</div>
		</div>
	</section>
	<div class="_footer">
		<section class="sec-1">
			<div class="sec-body">
				<div class="btn-box">
					<div class="form-row btn-box-right">
						<div class="col-auto">
							<button class="btn btn-danger mb-2" onclick="javascript:return fn_emailPopConfirm(this);">확인</button>
						</div>
					</div>
				</div>
			</div>
		</section>
	</div>
</div>
<script>
 $(document).ready(fn_setEmailCd());
 
	function fn_setEmailCd() {
		
		$('#popups #MAIL_NAME').val(scwin.emailEditorPop.mailname);
		
		$("#EMAIL_GCD").dropDownList({
			dataSource : null,
			commonCode : "0000_EMAIL_GCD",
			dataTextField : "COMMON_DETAIL_CD_KOR_NM",
			dataValueField : "COMMON_DETAIL_CD",
			hakbuGradFg : false,
			dataBound : function(e) {
				
				$('#popups #EMAIL_GCD').val(scwin.emailEditorPop.domain);
				$('#popups #DOMAIN').val(scwin.emailEditorPop.domain);
                
				if($('#popups #EMAIL_GCD').val() == "0000") {
					$('#popups #DOMAIN').prop('disabled',true);
                }
				
				$('#popups #EMAIL_GCD').bind("change", function(e) {
					if ($(this).val() == "0000") {
						$("#popups #DOMAIN").val("");
						$("#popups #DOMAIN").attr("disabled", false);
					} else {
						$("#popups #DOMAIN").val($(this).val());
						$("#popups #DOMAIN").attr("disabled", true);						
					}
				});
			}
		});
	}
	
	function fn_emailPopConfirm(obj) {

		if($('#popups #MAIL_NAME').val() == "") {
			alert("이메일 정보를 입력 하세요.",$('#popups #MAIL_NAME'));                            
            return false;
        }
        if($('#popups #DOMAIN').val() == "") {
        	alert("이메일 정보를 입력 하세요.",$('#popups #DOMAIN'));
            return false;
        }
        if(!gfn_val_isEmail($('#popups #MAIL_NAME').val()+"@"+$('#popups #DOMAIN').val())) {
            alert("메일 주소가 올바르지 않습니다.",$('#popups #MAIL_NAME'));
            return false;
        }

        $("#"+scwin.emailEditorPop.compid).val($('#popups #MAIL_NAME').val()+"@"+$('#popups #DOMAIN').val());
        $("#"+scwin.emailEditorPop.compid).focus();
    	$("#"+scwin.emailEditorPop.compid+"_wrap button i").removeClass("bi-pencil");
    	$("#"+scwin.emailEditorPop.compid+"_wrap button i").addClass("bi-x");
    	$("#"+scwin.emailEditorPop.compid+"_wrap button i span").html("삭제");
    	
    	if(typeof scwin.emailEditorPop.dataBound == "function"){
    		scwin.emailEditorPop.dataBound({"emailInput":$('#popups #MAIL_NAME').val()+"@"+$('#popups #DOMAIN').val()});   
    	}else if (typeof scwin.emailEditorPop.dataBound == "string"){
    	    window[scwin.emailEditorPop.dataBound]({"emailInput":$('#popups #MAIL_NAME').val()+"@"+$('#popups #DOMAIN').val()});
    	}
    	gfn_com_closeModalWall(obj);
	}
</script>