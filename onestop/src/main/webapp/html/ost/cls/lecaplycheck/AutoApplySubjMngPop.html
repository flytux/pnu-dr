<div id="popups">
	<section class="sec-1">
		<div class="sec-body">
			<div class="search-box">
				<input type="text" id="SYEAR" class="form-control" style="display: none;" data-bind="value: SYEAR"/> 
				<input type="text" id="TERM_GCD" class="form-control" style="display: none;" data-bind="value: TERM_GCD"/> 
				<input type="text" id="SUBJ_NO" class="form-control" style="display: none;" data-bind="value: SUBJ_NO" /> 
				<input type="text" id="CLASS_NO" class="form-control" style="display: none;" data-bind="value: CLASS_NO"/> 
			</div>
			<!-- 테이블 -->
			<div class="table-box table-list">
				<div class="table-body">
					<table class="table table-hover" data-toggle="table"  data-show-column="true">
						<caption>교과목정보</caption>
						<colgroup>
							<col style="min-width: 100px;">
							<col style="min-width: 100px;">
							<col style="min-width: 100px;">
							<col style="min-width: 100px;">
							<col style="min-width: 100px;">
							<col style="min-width: 100px;">
							<col style="min-width: 100px;">
							<col style="min-width: 100px;">
							<col style="min-width: 100px;">
						</colgroup>
						<thead>
							<tr>
								<th scope="col" rowspan="2">NO<br>&nbsp;</th>
								<th scope="col" rowspan="2">교과목명<br>&nbsp;</th>
								<th scope="col" rowspan="2">교과목번호<br>&nbsp;</th>
								<th scope="col" rowspan="2">분반<br>&nbsp;</th>
								<th scope="col" rowspan="2">교과목구분<br>&nbsp;</th>
								<th scope="col" colspan="4">재이수</th>
							</tr>
							<tr>
								<th scope="col">학년도</th>
								<th scope="col">학기</th>
								<th scope="col">교과목번호</th>
								<th scope="col">성적등급</th>
							</tr>
						</thead>
						<tbody id="resultTbody">
						</tbody>
					</table>
				</div>
			</div>
			<!-- /END 테이블 -->
		</div>
	</section>
</div>
<script type="text/x-tbody-template" id="resultTemplate">
	<tr style="cursor:pointer;">
        <td >#:RN#</td>
	    <td class="text-left" scope="row" >#:SUBJ_NM#</td>
	    <td>#:SUBJ_NO#</td>
		<td>#:CLASS_NO#</td>
		<td class="text-left" scope="row">#:SUBJ_GCD#</td>
		<td>#:RECMPL_SYEAR#</td>
		<td class="text-left" scope="row">#:RECMPL_TERM_GCD#</td>
		<td>#:RECMPL_SUBJ_NO#</td>
		<td class="text-left" scope="row">#:RECMPL_GRADE_CD#</td>
	</tr>
</script>
<script type="text/javascript">
	var total = 0; // 전체 문항수
	$(document).ready(popInit());

	function popInit() {
		/* 
		    [dataBind 공통] - json object의 값을 특정영역의 data-bind 정보를 이용해서 바인딩
		    param1 : obj - 데이터바인딩 할 영역
		    param2 : data - 데이터바인딩 할 데이터
		    param3 : obj_ - 데이터바인딩 영역에서 제외할 영역
		    param4 : callBack - 데이터바인딩 후 콜백함수
		    data-bind 구분
		      - value : $(this).val()
		      - text : $(this).text()
		      - html : $(this).html()
		      - htmlBr : $(this).html() -> 줄바꿈(/(\n|\r\n)/g)을 <br/>태그로 치환해서 표시
		      - checked : value값과 일치하는 항목을 checked처리
		      - chkContains : 바인딩되는 데이터가 콤나(,)등으로 여러개가 붙어서 구성되고, value값과 일치하는 항목들을 checked처리 할 경우 사용
		      - selected : option에 일치하는 value가 있는 경우 selected (없는경우 첫번째 option선택)
		      - unit : 단위를 붙여서 표시해야 하는 경우 (ex) data-bind="unit : lgnFailNumtm|회"
		      - cash : 천단위콤마표시 
		      - cash&unit : 천단위콤마표시 & 단위를 붙여서 표시 (ex) data-bind="cash&unit : wkrcnt|명"
		      - v_cash : value로 천단위콤마를 표시해서 넣는 경우
		 */
		gfn_com_dataBind($("#popups"), scwin.detailObj);

		fn_sch();
	}

	/***************************************************************************
	 * 강의평가 전체문항 조회
	 **************************************************************************/
	function fn_sch(data) {

		data = gfn_com_inputdata($(".search-box"));

		data.SYEAR = $("#SYEAR").val();
		data.TERM_GCD = $("#TERM_GCD").val();
		data.SUBJ_NO = $("#SUBJ_NO").val();
		data.CLASS_NO = $("#CLASS_NO").val();

		/* ajax처리 */
		gfn_ajax_request({
			url : "/ost/cls/lecaplycheck/AutoApplySubjMng/searchRecmplSubj",
			reqData : data,
			success : function(data, responseData) {
				$("#resultTbody").listView({
					dataSource : data,
					dataBound : function(e) {
						totalCnt = responseData.totalCnt;
						currentData = data;
					},
					template : $("#resultTemplate"),
					totalCnt : responseData.totalCnt,
					paging : null,
					excel : null
				});
			}
		});
	}
</script>