<div id="popups">
	<section class="sec-1">
		<div class="sec-body">
			<div class="mb-2"><b>장학생(</b>
					<div class="custom-control custom-radio custom-control-inline align-items-center">
		                  <input class="custom-control-input" type="radio" name="TITLE" id="RADIO1" value="007" checked disabled>
		                  <label class="custom-control-label" for="RADIO1" data-lang><b>근로</b></label>
					</div>
					<div class="custom-control custom-radio custom-control-inline">
		                  <input class="custom-control-input" type="radio" name="TITLE" id="RADIO2" value="0022" disabled >
		                  <label class="custom-control-label" for="RADIO2" data-lang><b>학업지원</b></label>
					</div><b>) 신청</b>
			</div>
			<div class="b-table-box flex-col-3" id="stdtTable" role="table" aria-label="학적정보 테이블">
				<div class="b-row-box" role="row">
					<div class="b-row-item">
						<div class="b-title-box" role="rowheader">
							<label data-lang>학번</label>
						</div>
						<div class="b-con-box" role="cell">
							<span data-bind="text: STDT_NO"></span>
							<input type="text" id="SelSTID0" class="d-none" />
							<input type="text" id="SelSTID1" class="d-none" />
							<input type="text" id="BoardUserID" class="d-none" />
						</div>
					</div>
					<div class="b-row-item">
						<div class="b-title-box" role="rowheader">
							<label data-lang>소속</label>
						</div>
						<div class="b-con-box" role="cell">
							<span data-bind="text: DEPT_NM"></span>
						</div>
					</div>
					<div class="b-row-item">
						<div class="b-title-box" role="rowheader">
							<label for="STDT_YEAR_TERM" data-lang>학년</label>
						</div>
						<div class="b-con-box" role="cell">
							<span id='STDT_YEAR_NM'></span>
						</div>
					</div>
				</div>
				<div class="b-row-box" role="row">
					<div class="b-row-item">
						<div class="b-title-box" role="rowheader">
							<label data-lang>성명</label>
						</div>
						<div class="b-con-box" role="cell">
							<span data-bind="text: STDT_KOR_NM"></span>
						</div>
					</div>
					<div class="b-row-item">
						<div class="b-title-box" role="rowheader">
							<label data-lang>생년월일(성별)</label>
						</div>
						<div class="b-con-box" role="cell">
							<span data-bind="text: BIRTH_GENDER"></span>
						</div>
					</div>
					<div class="b-row-item">
						<div class="b-title-box" role="rowheader">
							<label for="GPA" data-lang>직전학기/평점평균</label>
						</div>
						<div class="b-con-box" role="cell">
							<span data-bind="text: GPA_F"></span>
							<input type="text" id="GPA" class="d-none" data-bind="value : GPA" />
						</div>
					</div>
				</div>
			</div>
			<div class="b-table-box flex-col-2" id="" role="table" aria-label="변경사항 테이블">
				<div class="b-row-box" role="row">
					<div class="b-row-item merge-2">
						<div class="b-title-box" role="rowheader">
							<label data-lang>주소 및 분반</label>
						</div>
						<div class="b-con-box" role="cell">
							<span data-bind="text: ZIP_ADDR"></span>
						</div>
					</div>
				</div>
				<div class="b-row-box" role="row">
					<div class="b-row-item merge-2">
						<div class="b-title-box" role="rowheader">
							<label data-lang>이메일</label>
						</div>
						<div class="b-con-box" role="rowheader">
							<span data-bind="text: STDT_EMAIL"></span>
						</div>
					</div>
				</div>
				<div class="b-row-box" role="row">
					<div class="b-row-item">
						<div class="b-title-box" role="rowheader">
							<label id="" data-lang>핸드폰</label>
						</div>
						<div class="b-con-box " role="cell">
							<span data-bind="text: STDT_CELLULAR_NO_F"></span>
						</div>
					</div>
					<div class="b-row-item">
						<div class="b-title-box" role="rowheader">
							<label id="" data-lang>일반전화</label>
						</div>
						<div class="b-con-box " role="cell">
							<span data-bind="text: STDT_TEL_NO_F"></span>
						</div>
					</div>
				</div>
			</div>
			<p class="info-text">위의 정보가 다를 경우, <a href="/page?menuCD=000000000000331" target="_blank" title="새창 바로가기" class="text-primary"'>학적-학적부-개인정보수정</a><b>에서 수정해주세요. </b></p>
			<section class="sec-2">
				<header>
					<h4 class="sec-title">본인 계좌정보</h4> 
				</header>
				<div class="sec-body">
					<div class="b-table-box flex-col-3" id="" role="table" aria-label="">
						<div class="b-row-box" role="row">
							<div class="b-row-item">
								<div class="b-title-box" role="rowheader">
									<label id="" for="BANK_CD" data-lang>은행</label>
								</div>
								<div class="b-con-box" role="cell">
									<select id="BANK_CD" class="form-control"></select>
								</div>
							</div>
							<div class="b-row-item">
								<div class="b-title-box" role="rowheader">
									<label id="" for="ACCT_NO" data-lang>계좌번호</label>
								</div>
								<div class="b-con-box " role="cell">
                                    <input type="text" id="ACCT_NO" class="form-control"  readonly/>
								</div>
							</div>
							<div class="b-row-item">
								<div class="b-title-box" role="rowheader">
									<label id="" for="ACCT_NM_NM" data-lang>예금주</label>
								</div>
								<div class="b-con-box " role="cell">
                                    <input type="text" id="ACCT_NM_NM" class="form-control" readonly/>
								</div>
							</div>
						</div>
					</div>
					<div>
						<p class="info-text mb-0"><a href="/page?menuCD=000000000000330" target="_blank" title="새창 바로가기" class="text-primary"'>학적-학적부-계좌번호수정</a><b>에서 입력된 정보가 표시됩니다.</b></p>
					</div>
					<div>
						<p class="info-text info-text-style-1 text-danger">본인의 계좌번호를 정확히 기재했음을 확인함.</p>
					</div>
				</div>
			</section>
			<section class="sec-2">
				<header>
					<h4 class="sec-title">근무부서 정보</h4> 
				</header>
				<div class="sec-body">
					<div class="b-table-box flex-col-3" id="" role="table" aria-label="">
						<div class="b-row-box" role="row">
							<div class="b-row-item">
								<div class="b-con-box" role="cell">
									<select id="UPPER_DEPT_CD" class="form-control" title="상위근무부서"></select>
								</div>
							</div>
							<div class="b-row-item">
								<div class="b-con-box " role="cell">
									<select id="DEPT_CD" class="form-control" title="근무부서"></select>
								</div>
							</div>
							<div class="b-row-item">
								<div class="b-con-box " role="cell">
                                    <input type="text" id="DEPT_DETAIL" class="form-control" placeholder="근무부서 상세명 입력" title="근무부서 상세명 입력"/>
								</div>
							</div>
						</div>
					</div>
				</div>
			</section>			
			<section class="sec-2">
				<div class="sec-body">
					<section class="sec-2 d-none" id="grid01">
						<header>
							<h4 class="sec-title">2인이상 형제/자매 재학신고</h4>
						</header>
						<div class="sec-body">
							<div class="table-box" >
								<div class="table-body">                    
									<table class="table table-hover" data-toggle="table" data-show-column="true">
										<caption>형제자매 학생정보</caption>
										<colgroup>
										    <col style="min-width: 40px;">
											<col style="min-width: 140px;">
											<col style="min-width: 140px;">
											<col style="min-width: 160px;">
											<col style="min-width: 140px;">
											<col style="min-width: 100px;">
											<col style="min-width: 140px;">
										</colgroup>
										<thead>
											<tr>
											    <th scope="col">대학(부)</th>
												<th scope="col">학과(부/군/전공)</th>
												<th scope="col">학년</th>
												<th scope="col">학번</th>
												<th scope="col">성명</th>
												<th scope="col">주민등록번호</th>
												<th scope="col">재학</th>
											</tr> 
										</thead>
										<tbody id="resultTbody">
										</tbody>
									</table>
								</div>					
							</div>
							<div class="btn-box " id="BTN_BOX">
								<div class="form-row align-items-center btn-box-right">
									<div class="col-auto">
										<button class="btn btn-search mb-2" data-lang onclick="fn_searchBrothersPop()">형제/자매 조회</button>
									</div>
								</div>
							</div>
						</div>	
					</section>
					<div class="b-table-box flex-col-1 d-none" id="" role="table" aria-label="">
						<div class="b-row-box" role="row">
							<div class="b-row-item merge-2">
								<div class="b-title-box" role="rowheader">
									<label class="req">첨부파일</label>
								</div>
								<div class="b-con-box" role="cell">
									<div class="sec-body" id="uploader_target1"></div>
									<input type="hidden" id="ATTACH_FILE_GRP_CD" />
								</div>
							</div>
						</div>
					</div>
					<div class="mb-2">
						<span>위 본인은 다음의 사유로 </span><span id="APPLY_SYEAR_TERM"></span> 장학금을 신청합니다.
					</div>
					<div class="b-table-box flex-col-1 d-none" id="TBWrite2" role="table" aria-label="">
						<div class="b-row-box" role="row">
							<div class="b-row-item align-items-center">
								<div>※ 접수불가사유</div>
							</div>
						</div>
						<div class="b-row-box" role="row">
							<div class="b-row-item text-danger">
								<div class="b-con-box" id="" role="cell">
									<label id="Literal2"></label>
								</div>
							</div>
						</div>
					</div>
					<div class="b-table-box flex-col-1 d-none" id="TBWrite3" role="table" aria-label="">
						<div class="b-row-box " role="row">
							<div class="b-row-item align-items-center">
								<div>※ 현재 장학 확정내역</div>
							</div>
						</div>
						<div class="b-row-box" role="row">
							<div class="b-row-item">
								<div class="b-con-box text-danger" id="" role="cell">
									<label id="Literal3"></label>
								</div>
							</div>
						</div>
					</div>
				</div>
			</section>
			<div class="_footer">
				<section class="sec-1">
					<div class="sec-body">
						<div class="btn-box">
							<div class="form-row btn-box-right">
								<div class="col-auto">
									<button class="btn btn-new d-none" id="ibtn_save" type="button" data-lang onclick="javascript:return fn_applySave('C');">등록</button>
									<button class="btn btn-new d-none" id="ibtn_modify2" type="button" data-lang onclick="javascript:return fn_edit('U');">수정</button>
									<button class="btn btn-modify d-none" id="ibtn_modify" type="button" data-lang onclick="javascript:return fn_applySave('U');">저장</button>
									<button class="btn btn-primary d-none" id="ibtn_del" type="button" data-lang onclick="javascript:return fn_delete();">삭제</button>
								</div>
							</div>
						</div>
					</div>
				</section>
			</div>
		</div>
	</section>
</div>
<script type="text/x-tbody-template" id="resultTemplate">
	<tr style="cursor:pointer;">
        <td class="text-left">#:COLL_CD_NM#</td>
        <td class="text-left">#:DEPT_CD_NM#</td>
        <td class="text-left">#:STDT_YEAR_GCD_NM#</td>
	    <td class="">#:STDT_NO#</td>
        <td class="text-left">#:STDT_KOR_NM#</td>
	    <td class="">#:SSN#</td>
        <td class="text-left">#:HJ_STA_GCD_NM# <span class="detail-btn"><i class="bi bi-x"><span class="sr-only">삭제</span></i></span></td>
	</tr>
</script>
<script type="text/javascript">
	$(document).ready(popInit());

	function popInit() {
		if (scwin.loginUser.collGradGcd == "0002") {
			$("label[for='STDT_YEAR_TERM']").text('학기');
		}
		$("#STDT_YEAR_NM").text(scwin.detailObj.STDT_YEAR_NM);
		$("#APPLY_SYEAR_TERM").text(scwin.detailObj.APPLY_SYEAR_TERM);
		$("#BANK_CD").attr("disabled",true);
		fn_schBankList();
		fn_schUpperDeptList();

		$("#DEPT_CD").dropDownList({          
  			dataSource : '',
            dataTextField : "",
            dataValueField : "",
            optionLabel : "===근무부서===",
            optionValue : "",
            defaultValue : "", 
            expnCondition : "",
            dataBound : function(e) {
			}
		});
		setInit();
	}

	/*  팝업창 로드 시 초기설정 함수 */
	function setInit() {
		fn_uploader_target1();
		fn_event();
	}
	
	/***************************************************************************
	 * 이벤트
	 **************************************************************************/			
	function fn_event() {
		$("#UPPER_DEPT_CD").change(function(){
			fn_schDeptList();
		});
	}	
	
	/***************************************************************************
	 * 은행 리스트
	 **************************************************************************/			
	function fn_schBankList() {
	
		/* ajax처리 */
		gfn_ajax_request({
			url : "/ost/hj/stdtinfo/acctnoupd/selectBankList"
	          ,success: function(data, responseData){
	       	  $("#BANK_CD").dropDownList({          
	      				dataSource : data,
	                  dataTextField : "BANK_NM",
	                  dataValueField : "BANK_CD",
	                  optionLabel : "선택",
	                  optionValue : "",
	                  defaultValue : "", 
	                  expnCondition : "",
	                  dataBound : function(e) {
	                  }
	              });
				fn_stdtSch();
	           }
	       });
		
	}	

	/***************************************************************************
	 * 상위근무부서 조회
	 **************************************************************************/			
	function fn_schUpperDeptList() {
	
		/* ajax처리 */
		gfn_ajax_request({
			url : "/ost/jh/jhapply/WorkJhApply/selectListUpperDept"
	          ,success: function(data, responseData){
		       	  $("#UPPER_DEPT_CD").dropDownList({          
		      			  dataSource : data,
		                  dataTextField : "DEPT_KOR_NM",
		                  dataValueField : "DEPT_CD",
		                  optionLabel : "===상위근무부서===",
		                  optionValue : "",
		                  defaultValue : "", 
		                  expnCondition : "",
		                  dataBound : function(e) {
		                  }
		              });
		           }
	       });
		
	}	
	
	/***************************************************************************
	 * 근무부서 조회
	 **************************************************************************/			
	function fn_schDeptList() {
		var searchParam = { "DEPT_CD" :  $("#UPPER_DEPT_CD").val()
				 						, "SYEAR" : scwin.detailObj.SYEAR
										, "TERM_GCD" : scwin.detailObj.TERM_GCD
										, "JH_CD" : '007'
										};
		
		/* ajax처리 */
		gfn_ajax_request({
			url : "/ost/jh/jhapply/WorkJhApply/selectListDept",
			reqData : searchParam,
			success : function(data, responseData) {
	       	  $("#DEPT_CD").dropDownList({          
	      				dataSource : data,
	                  dataTextField : "DEPT_KOR_NM",
	                  dataValueField : "DEPT_CD",
	                  optionLabel : "===근무부서===",
	                  optionValue : "",
	                  defaultValue : "", 
	                  expnCondition : "",
	                  dataBound : function(e) {
		      			  if(deptCheck) $("#DEPT_CD").val(deptCd);
		      			  deptCheck = false;
	                  }
	              });
	           }
	       });
		
	}	
	
	/***************************************************************************
	 * 학생정보 조회
	 **************************************************************************/	
	function fn_stdtSch() {
		 var searchParam = {"SYEAR" : scwin.detailObj.SYEAR
										, "TERM_GCD" : scwin.detailObj.TERM_GCD
										};
		gfn_ajax_request({
			url : "/ost/jh/jhapply/WorkJhApply/selectListStdtInfo",
			reqData : searchParam,
			success : function(data, responseData) {
				if (gfn_com_isEmptyObject(data)) {
		            alert("해당 학번의 학생정보가 없습니다.");
		        }else{
		        	//기본정보 세팅
					var zip = data[0].ZIP_NO == ''? data[0].ZIP_NO : data[0].STDT_ZIP_NO;
					data[0].ZIP_ADDR = zip + ' ' +  data[0].ADDR;
					data[0].GPA_F = data[0].GPA+ ' /4.50';
					
					gfn_com_dataBind($("#popups"), data[0]);
					fn_bankSearch();
					fn_docsSearch();
		        }
			}
		});
	}
	
	/***************************************************************************
	 * 계좌정보 조회
	 **************************************************************************/	
	function fn_bankSearch() {
		 var searchParam = {};
		gfn_ajax_request({
			url : "/ost/jh/jhapply/WorkJhApply/selectListBank",
			reqData : searchParam,
			success : function(data, responseData) {
				if (gfn_com_isEmptyObject(data)) {
		        }else{
					$("#BANK_CD").val(data[0].BANK_CD);
					$("#ACCT_NO").val(data[0].ACCT_NO);
					$("#ACCT_NM_NM").val(data[0].ACCT_NM_NM);
		        }
			}
		});
	}

	/***************************************************************************
	 * 제출서류 조회
	 **************************************************************************/	
	function fn_docsSearch() {
		// HAKBU_GRAD_USE_FG 1:학부 / 2:대학원
		var hakbuGradGbn = scwin.loginUser.collGradGcd == '0001' ? '1' : '2';
		var searchParam = {"HAKBU_GRAD_USE_FG" : hakbuGradGbn
										, "JH_APPLY_GCD" : '0020'
										};
		gfn_ajax_request({
			url : "/ost/jh/jhapply/WorkJhApply/selectListDocs",
			reqData : searchParam,
			success : function(data, responseData) {
				$('#ibtn_save').removeClass('d-none');

				if(scwin.rowState=="U") fn_applyListSearch();
			}
		});
	}
	
	var upperDeptCd = '';//상위근무부서
	var deptCd = '';//근무부서
	var deptCheck = false; //내역조회시 근무부서 세팅
	/***************************************************************************
	 * 신청내역 조회
	 **************************************************************************/	
	function fn_applyListSearch() {
		deptCheck = false;
		 var searchParam = {"SYEAR" : scwin.detailObj.SYEAR
										, "TERM_GCD" : scwin.detailObj.TERM_GCD										
										, "JH_CHARGE_VIA_GCD" : scwin.detailObj.JH_CHARGE_VIA_GCD
										, "JH_GCD" : scwin.detailObj.JH_GCD
										, "JH_CD" : scwin.detailObj.JH_CD
										, "JH_APPLY_GCD" : scwin.detailObj.JH_APPLY_GCD
										, "JH_SUBMIT_DOC_GCD" : scwin.detailObj.JH_SUBMIT_DOC_GCD
										, "APPLY_CHASU" : scwin.detailObj.APPLY_CHASU
										};

		 /* ajax처리 */
		gfn_ajax_request({
			url : "/ost/jh/jhapply/WorkJhApply/selectListWorkJhApplySearch",
			reqData : searchParam,
			success : function(data, responseData) {
				if (gfn_com_isEmptyObject(data)) {
					alert('선택하신 신청서의 내용이 없습니다.');
					gfn_com_closeModalWall(3, function() {
						fn_sch();
					});
		        }else{
// 					$("#ATTACH_FILE_GRP_CD").val(data[0][0].ATTACH_FILE_GRP_CD);
					$("#BoardUserID").val(data[0][0].STDT_NO);
					fn_uploader_target1();
    				if (data[0][0].JH_RECEIVE_GCD == '0000') { //미접수 
    					$('#ibtn_modify2').removeClass('d-none'); 
    					$('#ibtn_del').removeClass('d-none');
    				} else if (data[0][0].JH_RECEIVE_GCD == '0009') { //접수불가
    					$('#ibtn_modify2').addClass('d-none');
    					$('#ibtn_del').removeClass('d-none');
    				} else if (data[0][0].JH_RECEIVE_GCD == '0001') {  //접수완료,신청기간아님
                        $('#ibtn_modify2').addClass('d-none');
                        $('#ibtn_del').addClass('d-none');
    				}
    				
	    			$('#ibtn_save').addClass('d-none');
	    			$('#ibtn_modify').addClass('d-none');

					$("#BANK_CD").val(data[0][0].BANK_CD);
					$("#ACCT_NO").val(data[0][0].ACCT_NO);
					$("#ACCT_NM_NM").val(data[0][0].ACCT_NM);
					upperDeptCd = data[0][0].WORK_ORGAN_CD;
					deptCd = data[0][0].WORK_DEPT_CD; 
					$("#DEPT_DETAIL").val(data[0][0].WORK_PLACE_INFO);
               	    $("#UPPER_DEPT_CD").val(upperDeptCd);
               	 	deptCheck = true;
					fn_schDeptList();
					
					
					//신청불가사유
					if(data[0][0].UNCONF_REASON_CONTENT != '' && data[0][0].UNCONF_REASON_CONTENT != null){
    					$('#TBWrite2').removeClass('d-none');
    					$('#Literal2').text(data[0][0].UNCONF_REASON_CONTENT);
					}

					//확정내역
			    	if(data[1].length > 0){
			    		var Checker = "";
			    		$("#TBWrite3").removeClass("d-none");
			    		
				    	for(var i=0;i<data[1].length;i++){
				    		var val = data[1][i];
				    		Checker += val.JH_NM + "("+val.RATING_NM+")<br>";
				    	};
				    	$("#Literal3").html(Checker);
			    	}
		        }
				
			}
		});
	}

	/***************************************************************************
	 * 형제/자매 조회
	 **************************************************************************/	
	function fn_searchBrothersPop() {
		gfn_com_modalPopup({
			width : 1000,
			height : 520,
			index : 2,
			target : null,
			title : "형제자매 검색",
			include : "/html/ost/jh/jhapply/PriorityJhApply2Pop.html"
		});
	}
	
	/***************************************************************************
	 * 형제/자매 조회 콜백
	 **************************************************************************/	
	var broDataList = [];
	function fn_searchBrothersCallback() {
		if ($('#resultTbody tr:eq(0) td:eq(0)').text() != '' && $('#resultTbody tr:eq(1) td:eq(0)').text() != '') {
			alert('2명까지 선택 가능합니다.');
			return;
		}
		var broData = scwin.detailObj.brothers;
		var idx = 0;

		if ($("#SelSTID0").val() != '') {
			idx = 1; 
			broDataList[1] = broData;
		}else{
			broDataList[0] = broData;
		}
		$('#SelSTID' + idx).val(broData.STDT_NO);
		
		$("#resultTbody").listView({
            dataSource : broDataList,
            emptyComment : '선택된 형제/자매가 없습니다.',
            dataBound : function(e) {
                $('#resultTbody .detail-btn').bind("click", function(e){
					$(this).closest("tr").remove();
					if($('#resultTbody tr:eq(0)').data() != null ){
						$('#SelSTID0').val($('#resultTbody tr:eq(0)').data().STDT_NO);
					}else{
						$('#SelSTID0').val('');
					}
                });
            },
            template : $("#resultTemplate"),
             totalViewYn : "N"
        });
	}

	/***************************************************************************
	 *  필수입력 체크
	 **************************************************************************/	
	function fn_validate() {
		//계좌정보 체크
		if ($('#BANK_CD').val() == '') {
			$('#bank').focus();
			alert('입력된 은행정보가 없습니다.(학적-학적부-계좌번호수정에서 등록 가능)');
			return false;
		}
		if ($('#ACCT_NO').val() == '') {
			alert('입력된 계좌번호가 없습니다.(학적-학적부-계좌번호수정에서 등록 가능)');
			return false;
		}
		if ($('#ACCT_NM_NM').val() == '') {
			alert('입력된 예금주가 없습니다.(학적-학적부-계좌번호수정에서 등록 가능)');
			return false;
		}
		if ($('#UPPER_DEPT_CD').val() == '' || $('#DEPT_CD').val() == '' || $('#DEPT_DETAIL').val() == '') {
			alert('근무부서를 입력해 주십시오.');
			return false;
		}
		
		return true;
	}

	/***************************************************************************
	 *  파일 필수 체크
	 **************************************************************************/	
	function fn_validateEtc() {
		if ($("#uploader_target1").find(".attach-list li").length < 1) {
			alert("첨부파일은 필수 입력 사항 입니다.");
			return;
		}
		
		return true;
	}
	
	var param = [];
	/***************************************************************************
	 *  저장
	 **************************************************************************/	
	function fn_applySave(type) {
		param = gfn_com_inputdata($("#popups"));
		param.rowStatus = type;
		if (!fn_validate())return false;
		confirm(gva_SAVE_CONFIRM_MSG, function(_flag) {
			if (_flag) {
				fn_clause(type);
			}
		});						
	}

	/***************************************************************************
	 *  정보동의 팝업
	 **************************************************************************/	
	function fn_clause(type) { 
		gfn_com_clausePop({
			title : '정보동의팝업',
			systemGcd : '0002',
			clauseSeqNo : 6, 
			callbackFunc : function(data) {				
				/* 필수동의 사항에 동의한 경우 콜백 실행 */
				param["agreeDltInfo"] = data; 	// 전달 파라미터에 정보동의 정보 담기
				fn_applySaveCallback(type);	// 실제 신청 함수
			}
		});
	}

	/***************************************************************************
	 *  저장 callback
	 **************************************************************************/	
	function fn_applySaveCallback(type) {
		param.SYEAR = scwin.detailObj.SYEAR;
		param.TERM_GCD = scwin.detailObj.TERM_GCD;
		param.STDT_NO = scwin.detailObj.STDT_NO;
		param.JH_CHARGE_VIA_GCD = '0000';
		param.JH_GCD = '0021';
		param.JH_CD = '007';
		param.OLD_JH_CD = scwin.detailObj.JH_CD;
		param.PRETERM_GPA = param.GPA;
// 		param.BANK_CD = ;
		param.ACCT_NM = param.ACCT_NM_NM;
// 		param.ACCT_NO = ;
		param.WORK_ORGAN_CD = $("#UPPER_DEPT_CD").val();
		param.WORK_DEPT_CD = $("#DEPT_CD").val();
		param.WORK_PLACE_INFO = $("#DEPT_DETAIL").val();
		param.JH_APPLY_GCD = '0020';
		param.JH_SUBMIT_DOC_GCD = '0140';
		param.BROS_STDT_NO = $("#SelSTID0").val(); 
		param.BROS_HJ_STA_GCD ='' ;
		param.BROS_HJ_STA_GCD_NM = '';
		param.ZIP_NO = '';
		param.ADDR = '';
		param.DETAIL_ADDR = '';
		param.EMAIL = '';
		param.TEL_NO = '';
		param.CELLULAR_NO = '';
		param.APPLY_CHASU = scwin.detailObj.APPLY_CHASU;
		param.SYSTEM_GCD = '0002';
		param.ATTACH_FILE_GRP_CD = null;

		gfn_ajax_request({
			url : "/ost/jh/jhapply/WorkJhApply/executeWorkJhApply",
			reqData : param,
			success : function(data, responseData) {
				if(gfn_com_isEmptyObject(data)) alert('등록되지 않았습니다. 담당자에게 문의하세요.');
				if (!gfn_com_isEmptyObject(data)) {
					if(data.O_RSLT =="N"){
						alert(data.O_MSG);
						return;
					}else if (data.O_RSLT == "Y") {
						var msg = type == 'C' ? '등록' : '수정';
						alert('장학금 신청이 ' + msg + '되었습니다.');

						gfn_com_closeModalWall(3, function() {
							fn_sch();
						});
					}
				}
			}
		});
	}

	/***************************************************************************
	 *  파일업로드 컴포넌트
	 **************************************************************************/	
	function fn_uploader_target1() {
		$("#uploader_target1").formuploader({
			SYSTEM_GCD : "0002", //시스템코드
			ATTACH_FILE_GCD : "0002", // 첨부파일 종류 코드 
			ATTACH_FILE_GRP_CD : $("#ATTACH_FILE_GRP_CD").val(), // 첨부파일 그룹 코드 
			ACCEPT_EXT : "JPG, PNG, XLS, XLSX, ZIP, PDF, HWP", // 허용확장자 ( 메뉴설정에서 들고 오거나 지정한 확장자가 없으면 기본 확장자로 사용. )
//	 		UPLOAD_SIZE : "4",
			UPLOAD_SIZE : "",
			FILE_ADD_YN : "Y", //신규추가가능여부
			FILE_DEL_YN : "Y", //삭제가능여부
			FILE_DWN_YN : "Y", //다운로드가능여부
			FILE_INFO_YN : "Y", /* 확장자와 제한용량 정보표시 여부*/
			FILE_AREA_WIDTH_PER : 100, /* 첨부파일영역의 %값 */
			FILE_COMMENT : "위 3가지 증빙서류(PDF파일) 모두 업로드 하여야 신청이 완료됩니다.",
			FILE_VIEWER_YN : "Y", /* 첨부파일뷰어 표시 여부 */
	       	FILE_TAG_CONTENT_YN : "N", /* 첨부파일 대체텍스트 표시 여부 */
			dataBound : function(e,_target) { /* 업로드 완료후 처리 함수*/
				alert("업로드 완료",_target);
				$("#ATTACH_FILE_GRP_CD").val($("#uploader_target1").find("#file_1").attr('attach_file_grp_cd'));
			}

		});
	}

	/***************************************************************************
	 *  삭제
	 **************************************************************************/	
	function fn_delete() {  
		confirm("삭제하시겠습니까?", function(_flag) {
			if (_flag) {
				
				if($("#BoardUserID").val() != scwin.loginUser.userId){
					alert('작성자만 삭제하실 수 있습니다.')
					history.go(-1);
					return;
				}
				
				 var paramData = {"SYEAR" : scwin.detailObj.SYEAR
												, "TERM_GCD" : scwin.detailObj.TERM_GCD										
												, "JH_CHARGE_VIA_GCD" : scwin.detailObj.JH_CHARGE_VIA_GCD
												, "JH_GCD" : scwin.detailObj.JH_GCD
												, "JH_CD" : scwin.detailObj.JH_CD
												, "APPLY_CHASU" : scwin.detailObj.APPLY_CHASU
												};
				gfn_ajax_request({
					url : "/ost/jh/jhapply/WorkJhApply/deleteWorkJhApply",
					reqData : paramData,
					success : function(data, responseData) {
						if (data.O_RSLT == "Y") {
							alert(data.O_MSG);
							gfn_com_closeModalWall(3, function() {
								fn_sch();
							});
						}
					}
				});
				
			}
		});
	}

	/***************************************************************************
	 *  수정
	 **************************************************************************/	
	function fn_edit(gbn) {
        //$('#ibtn_modify2').addClass('d-none');
		//$('#ibtn_modify').removeClass('d-none');
		fn_applySave("U");

	}
	
</script>